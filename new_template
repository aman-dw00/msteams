{
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "type": "AdaptiveCard",
  "version": "1.4",
  "body": [
    {
      "type": "TextBlock",
      "text": "${title}",
      "weight": "Bolder",
      "size": "Large",
      "color": "${if(contains(title, 'FIRING'), 'attention', if(contains(title, 'RESOLVED'), 'good', 'default'))}",
      "wrap": true
    },
    {
      "type": "TextBlock",
      "text": "ðŸš¨ **Alerts Summary**",
      "wrap": true,
      "weight": "Bolder",
      "size": "Medium",
      "spacing": "Medium",
      "separator": true
    },
    {
      "type": "TextBlock",
      "text": "${replace(replace(replace(text, '\nLabels:', '\n\nðŸ”¹ **Labels:**\n'), '\nAnnotations:', '\n\nðŸ“ **Annotations:**\n'), '\nSource:', '\n\nðŸ”— **Source:** ')}",
      "wrap": true,
      "spacing": "Medium"
    },
    {
      "type": "TextBlock",
      "text": "**${count(split(text, 'Source:')) - 1} active alerts** found",
      "wrap": true,
      "spacing": "Medium",
      "color": "attention"
    }
  ],
  "actions": [
    {
      "type": "Action.OpenUrl",
      "title": "ðŸ“‹ Open Primary Alert",
      "url": "${if(count(split(text, 'Source:')) > 1, trim(split(text, 'Source:')[1]), 'https://grafana.example.com')}"
    },
    {
      "type": "Action.OpenUrl",
      "title": "ðŸ“‹ Open Grafana Dashboard",
      "url": "https://grafana.example.com/dashboards"
    }
  ]
}
