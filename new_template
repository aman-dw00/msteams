{
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "type": "AdaptiveCard",
  "version": "1.4",
  "body": [
    {
      "type": "TextBlock",
      "text": "${$data.title}",
      "weight": "Bolder",
      "size": "Large",
      "color": "${if(contains($data.title, 'FIRING'), 'attention', if(contains($data.title, 'RESOLVED'), 'good', 'default'))}",
      "wrap": true
    },
    {
      "type": "TextBlock",
      "text": "ğŸš¨ **Alerts Summary**",
      "weight": "Bolder",
      "size": "Medium",
      "spacing": "Medium"
    },
    {
      "type": "TextBlock",
      "text": "${replace(replace(replace($data.text, '\\nLabels:', '\\n\\nğŸ”¹ **Labels:**'), '\\nAnnotations:', '\\n\\nğŸ“ **Annotations:**'), '\\nSource:', '\\n\\nğŸ”— **Source:**')}",
      "wrap": true,
      "spacing": "Medium"
    },
    {
      "type": "TextBlock",
      "text": "**${count(split($data.text, 'Source:')) - 1} active alerts** found",
      "color": "attention",
      "spacing": "Medium"
    }
  ],
  "actions": [
    {
      "type": "Action.OpenUrl",
      "title": "ğŸ”— Open Primary Alert",
      "url": "${if(greater(count(split($data.text, 'Source:')), 1, trim(split($data.text, 'Source:')[1]), 'https://grafana.example.com')}"
    },
    {
      "type": "Action.OpenUrl",
      "title": "ğŸ“‹ Open Grafana Dashboard",
      "url": "https://grafana.example.com/dashboards"
    }
  ]
}
