{
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "version": "1.4",
  "type": "AdaptiveCard",
  "body": [
    {
      "type": "TextBlock",
      "size": "Medium",
      "weight": "Bolder",
      "text": "@{triggerBody()?['title']}"
    },
    {
      "type": "TextBlock",
      "text": "@{triggerBody()?['text']}",
      "wrap": true
    }
  ]
}
--------------------------------

{
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "type": "AdaptiveCard",
  "version": "1.4",
  "body": [
    {
      "type": "TextBlock",
      "text": "üî• @{triggerBody()?['title'] ?? 'N/A Alert Title'}",
      "wrap": true,
      "weight": "Bolder",
      "size": "Large",
      "color": "attention",
      "horizontalAlignment": "Center"
    },
    {
      "type": "TextBlock",
      "text": "**üìÑ Summary:**\n@{triggerBody()?['title'] ?? 'No summary provided.'}",
      "wrap": true,
      "spacing": "Small"
    },
    {
      "type": "TextBlock",
      "text": "**üìä Status:** FIRING",
      "wrap": true,
      "spacing": "Small",
      "color": "Attention"
    },
    {
      "type": "TextBlock",
      "text": "**üîç Details:**",
      "wrap": true,
      "spacing": "Small",
      "weight": "Bolder"
    },
    {
      "type": "ColumnSet",
      "columns": [
        {
          "type": "Column",
          "width": "stretch",
          "items": [
            {
              "type": "TextBlock",
              "text": "‚Ä¢ **Alert Name:** @{split(triggerBody()?['text'] ?? '','alertname = ')[1]?split('\n')[0] ?? 'N/A'}",
              "wrap": true,
              "spacing": "Small"
            },
            {
              "type": "TextBlock",
              "text": "‚Ä¢ **Severity:** @{split(triggerBody()?['text'] ?? '','severity = ')[1]?split('\n')[0] ?? 'N/A'}",
              "wrap": true,
              "spacing": "Small"
            },
            {
              "type": "TextBlock",
              "text": "‚Ä¢ **Namespace:** @{split(triggerBody()?['text'] ?? '','namespace = ')[1]?split('\n')[0] ?? 'N/A'}",
              "wrap": true,
              "spacing": "Small"
            }
          ]
        },
        {
          "type": "Column",
          "width": "stretch",
          "items": [
            {
              "type": "TextBlock",
              "text": "‚Ä¢ **Pod:** @{split(triggerBody()?['text'] ?? '','pod = ')[1]?split('\n')[0] ?? 'N/A'}",
              "wrap": true,
              "spacing": "Small"
            },
            {
              "type": "TextBlock",
              "text": "‚Ä¢ **Team:** @{split(triggerBody()?['text'] ?? '','team = ')[1]?split('\n')[0] ?? 'N/A'}",
              "wrap": true,
              "spacing": "Small"
            },
            {
              "type": "TextBlock",
              "text": "‚Ä¢ **Environment:** @{split(triggerBody()?['text'] ?? '','channel = ')[1]?split('\n')[0] ?? 'N/A'}",
              "wrap": true,
              "spacing": "Small"
            }
          ]
        }
      ]
    },
    {
      "type": "TextBlock",
      "text": "**üìù Annotations:**",
      "wrap": true,
      "spacing": "Medium",
      "weight": "Bolder"
    },
    {
      "type": "TextBlock",
      "text": "‚Ä¢ **Dashboard:** @{triggerBody()?['annotations']?['dashboard_url'] ?? 'N/A'}",
      "wrap": true,
      "spacing": "Small"
    },
    {
      "type": "TextBlock",
      "text": "‚Ä¢ **Runbook:** @{triggerBody()?['annotations']?['runbook_url'] ?? 'N/A'}",
      "wrap": true,
      "spacing": "Small"
    },
    {
      "type": "TextBlock",
      "text": "‚Ä¢ **Description:** @{triggerBody()?['annotations']?['description'] ?? 'No description provided.'}",
      "wrap": true,
      "spacing": "Small"
    }
  ],
  "actions": [
    {
      "type": "Action.OpenUrl",
      "title": "üìò Runbook",
      "url": "@{triggerBody()?['annotations']?['runbook_url'] ?? ''}",
      "isVisible": "${if(triggerBody()?['annotations']?['runbook_url'], true, false)}"
    },
    {
      "type": "Action.OpenUrl",
      "title": "üìä Dashboard",
      "url": "@{triggerBody()?['annotations']?['dashboard_url'] ?? ''}",
      "isVisible": "${if(triggerBody()?['annotations']?['dashboard_url'], true, false)}"
    },
    {
      "type": "Action.OpenUrl",
      "title": "üîï Silence",
      "url": "@{if(contains(triggerBody()?['text'], 'Source:'), trim(split(triggerBody()?['text'], 'Source:')[1]), 'https://example.com')}",
      "isVisible": "${if(contains(triggerBody()?['text'], 'Source:'), true, false)}"
    }
  ]
}
